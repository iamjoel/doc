# 性能
## 目标
提升速度，减少用户等待的时间。最终来提升用户的体验。

## 方法论
找到瓶颈，找关键指标，设定目标，优化。

## 组成部分
性能可分为 加载时性能 和 运行时性能。

## 加载时性能
工具：Chrome 开发者工具 NetWork。

1. 减少请求次数。
  1. 缓存。
    1. 文件的缓存。
    2. 接口的缓存。
  2. 内联体积小(<5KB)的图片。将图片转化成 Base64 字符串。
  3. 合并。
     1. 文件合并
     2. 接口合并。 技术：GraphQL。BFF。
2. 减少体积。
  4. 压缩。
     1. 传输时的压缩。gzip 等压缩算法。
     2. 文件内容的压缩。
  5. 图片：选择合适的文件格式。图片： Webp，jpeg，png。
  6. 代码：去掉不用的代码。工具：tree shake 等。
   1. 体积大的代码：拆分。特别的框架和业务代码合在一起的，抽取出框架代码(webpack vendor)。
3. 提升传输速度
   1. 使用 CDN。
   2. 加载的优先级
      1. 首屏。
   3. 并行数量。
   4. HTTP 协议

## 运行时性能
工具：Performance， Lighthouse。

1. 减少渲染。
   1. 渲染的缓存。
   2. 减少更新 DOM 的数量。 Visual DOM。
   3. 减少 DOM 的数量。
2. CSS 的优化。
   1. 选择器的优化。
      1. 右侧指定性强的。
      2. 减少层级。
3. 防止计算密集型的的内容卡UI。放在后台算(Service work) 或给服务器做。
4. 节流和防抖。